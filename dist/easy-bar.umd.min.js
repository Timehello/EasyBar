!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):e.EasyBar=o()}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,o){for(var r=0;r<o.length;r++){var l=o[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(o,r,l){return r&&e(o.prototype,r),l&&e(o,l),o}}(),l=function(){function e(){o(this,e)}return r(e,null,[{key:"hasClass",value:function(e,o){return e.classList?e.classList.contains(o):new RegExp("\\b"+o+"\\b").test(e.className)}},{key:"addClass",value:function(e,o){e.classList?e.classList.add(o):hasClass(e,o)||(e.className+=" "+o)}},{key:"removeClass",value:function(e,o){e.classList?e.classList.remove(o):e.className=e.className.replace(new RegExp("\\b"+o+"\\b","g"),"")}},{key:"compatStyle",value:function(e,o,r){var l=o.slice(0,1).toUpperCase()+o.substring(1);e.style["webkit"+l]=r,e.style["moz"+l]=r,e.style["ms"+l]=r,e.style["o"+l]=r,e.style[o]=r}},{key:"debounce",value:function(e,o,r){o||(o=100);var l=null;return function(){var t=this,n=arguments;if(clearTimeout(l),l=setTimeout(function(){e.apply(t,n)},o),r)return r.apply(t,n)}}},{key:"throttle",value:function(e,o,r){var l,t;return o||(o=100),function(){var n=this,s=+new Date,a=arguments;if(l&&s<l+o?(clearTimeout(t),t=setTimeout(function(){l=s,e.apply(n,a)},o)):(l=s,e.apply(n,a)),r)return r.apply(n,a)}}}]),e}(),t=function(){function e(){o(this,e)}return r(e,null,[{key:"isFirefox",value:function(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}}]),e}(),n={minLength:50,maxLength:-1,resizeRefresh:!0,barfloat:!1,preventParentScroll:!1,scrollBarBehavior:null,scrollThrottle:10,draggerThrottle:10,observerThrottle:200,resizeDebounce:200,scrollingPhantomDelay:1e3,draggingPhantomDelay:1e3,clsBox:"eb",clsBoxScrolling:"eb-scrolling",clsBoxScrollingPhantom:"eb-scrolling-phantom",clsBoxDragging:"eb-dragging",clsBoxDraggingPhantomClass:"eb-dragging-phantom",clsBoxVisibleBarV:"eb-visible-v",clsBoxInvisibleBarV:"eb-invisible-v",clsBoxVisibleBarH:"eb-visible-h",clsBoxInvisibleBarH:"eb-invisible-h",clsContent:"eb-content",clsTrackV:"eb-track-v",clsThumbV:"eb-thumb-v",clsTrackH:"eb-track-h",clsThumbH:"eb-thumb-h"};!function(e,o){void 0===o&&(o={});var r=o.insertAt;if(e&&"undefined"!=typeof document){var l=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css","top"===r&&l.firstChild?l.insertBefore(t,l.firstChild):l.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}}(".hide-native-bar::-webkit-scrollbar{display:none}.hide-native-bar::-o-scrollbar{display:none}.hide-native-bar{-ms-overflow-style:none}.eb>.eb-track-h,.eb>.eb-track-v{-webkit-transition:background-color .3s;transition:background-color .3s;z-index:1;border-radius:20px}.eb>.eb-track-v{width:8px;top:5px;right:5px;height:calc(100% - 20px)}.eb>.eb-track-h{height:8px;left:5px;bottom:5px;width:calc(100% - 20px)}.eb.eb-visible-h.eb-scrolling-phantom>.eb-track-h,.eb.eb-visible-h>.eb-track-h:hover,.eb.eb-visible-v.eb-scrolling-phantom>.eb-track-v,.eb.eb-visible-v>.eb-track-v:hover{-webkit-transition:background-color .1s;transition:background-color .1s;background-color:rgba(0,0,0,.1)}.eb.eb-visible-h>.eb-track-h>.eb-thumb-h,.eb.eb-visible-v>.eb-track-v>.eb-thumb-v{-webkit-transition:background-color .3s;transition:background-color .3s;background-color:rgba(0,0,0,.15);border-radius:20px;display:block}.eb>.eb-track-v>.eb-thumb-v{width:100%}.eb>.eb-track-h>.eb-thumb-h{height:100%}.eb.eb-visible-h.eb-scrolling-phantom>.eb-track-h>.eb-thumb-h,.eb.eb-visible-h>.eb-track-h:hover>.eb-thumb-h,.eb.eb-visible-v.eb-scrolling-phantom>.eb-track-v>.eb-thumb-v,.eb.eb-visible-v>.eb-track-v:hover>.eb-thumb-v{-webkit-transition:background-color .1s;transition:background-color .1s;background-color:rgba(0,0,0,.3)}");var s="hide-native-bar",a=t.isFirefox();function i(){var e=document.createElement("div");e.style.position="absolute";var o=document.createElement("div");return o.style.position="absolute",e.appendChild(o),{scrollBarTrack:e,scrollBarThumb:o}}function c(e){e.scrollHandler||(e.scrollHandler=l.throttle(function(){f(e),b(e),b(e),function(e){e.scrollingClassTimeout&&clearTimeout(e.scrollingClassTimeout),l.addClass(e.scrollBox,e.config.clsBoxScrolling),e.scrollingClassTimeout=setTimeout(function(){l.removeClass(e.scrollBox,e.config.clsBoxScrolling),e.scrollingClassTimeout&&delete e.scrollingClassTimeout},e.config.scrollThrottle+5),e.scrollingPhantomClassTimeout&&clearTimeout(e.scrollingPhantomClassTimeout),l.addClass(e.scrollBox,e.config.clsBoxScrollingPhantom),e.scrollingPhantomClassTimeout=setTimeout(function(){l.removeClass(e.scrollBox,e.config.clsBoxScrollingPhantom),e.scrollingPhantomClassTimeout&&delete e.scrollingPhantomClassTimeout},e.config.scrollThrottle+e.config.scrollingPhantomDelay)}(e)},e.config.scrollThrottle))}function h(e){e.wheelHandler&&(e.scrollCevBox.removeEventListener("wheel",e.wheelHandler,0),delete e.wheelHandler)}function u(e){e.resizeHandler&&(window.removeEventListener("resize",e.resizeHandler,0),delete e.resizeHandler)}function v(o){o.scrollCevBox||(o.scrollBox=o.rootEl,o.scrollBoxClip=document.createElement("div"),o.scrollCev=o.rootEl.firstElementChild,o.scrollCevBox=document.createElement("div"),l.addClass(o.scrollBox,o.config.clsBox),o.scrollBox.style.position="relative",o.scrollBox.style.overflow="hidden",o.scrollBoxClip.style.height="100%",o.scrollBoxClip.style.width="100%",o.scrollBoxClip.style.overflow="hidden",l.addClass(o.scrollCevBox,o.config.clsContent),l.addClass(o.scrollCevBox,s),o.scrollCevBox.style.display="block",o.scrollCevBox.style.overflow="hidden",o.scrollCevBox.style.height="100%",o.scrollCevBox.style.width="100%",o.scrollBox.removeChild(o.scrollCev),o.scrollCevBox.appendChild(o.scrollCev),o.scrollBoxClip.appendChild(o.scrollCevBox),o.scrollBox.appendChild(o.scrollBoxClip),o.scrollCevBox.addEventListener("scroll",o.scrollHandler,0),o.mutationObserver=function(o){return("undefined"==typeof MutationObserver?"undefined":e(MutationObserver))===e(void 0)?null:new MutationObserver(l.throttle(function(){p(o)},o.config.observerThrottle))}(o),o.mutationObserver&&o.mutationObserver.observe(o.scrollCevBox,{childList:!0,characterData:!0,subtree:!0}))}function d(e){var o;e.barBehavior.vBarEnable&&e.barBehavior.vBarShow?(e.vBar||(o=i(),e.vBar={scrollBarTrack:o.scrollBarTrack,scrollBarThumb:o.scrollBarThumb},l.compatStyle(e.vBar.scrollBarTrack,"userSelect","none"),e.scrollBox.appendChild(e.vBar.scrollBarTrack),e.vBar.scrollBarThumb.addEventListener("mousedown",e.mouseDown,0),e.vBar.scrollBarThumb.addEventListener("touchstart",e.mouseDown,0)),e.vBar.scrollBarTrack.className=e.config.clsTrackV,e.vBar.scrollBarThumb.className=e.config.clsThumbV):B(e),e.barBehavior.hBarEnable&&e.barBehavior.hBarShow?(e.hBar||(o=i(),e.hBar={scrollBarTrack:o.scrollBarTrack,scrollBarThumb:o.scrollBarThumb},l.compatStyle(e.hBar.scrollBarTrack,"userSelect","none"),e.scrollBox.appendChild(e.hBar.scrollBarTrack),e.hBar.scrollBarThumb.addEventListener("mousedown",e.mouseDown,0),e.hBar.scrollBarThumb.addEventListener("touchstart",e.mouseDown,0)),e.hBar.scrollBarTrack.className=e.config.clsTrackH,e.hBar.scrollBarThumb.className=e.config.clsThumbH):g(e),function(e){if(e.vBar||e.hBar){var o=function(){var e=document.body,o=document.createElement("div"),r=document.createElement("div");o.className=s,o.style.position="absolute",o.style.pointerEvents="none",o.style.bottom="0",o.style.right="0",o.style.width="100px",o.style.height="100px",o.style.overflow="hidden",r.style.width="100%",r.style.height="100%",o.appendChild(r),e.appendChild(o);var l=r.offsetWidth,t=r.offsetHeight;o.style.overflow="scroll";var n=l-r.offsetWidth,a=t-r.offsetHeight;return e.removeChild(o),{v:n,h:a}}();e.vBar?(e.scrollCevBox.style.overflowY="scroll",e.scrollCevBox.style.width="calc(100% + "+o.v+"px)",a&&0==o.v&&(e.vBar.scrollBarTrack.style.display="none")):(e.scrollCevBox.style.overflowY="hidden",e.scrollCevBox.style.width="100%"),e.hBar?(e.scrollCevBox.style.overflowX="scroll",e.scrollCevBox.style.height="calc(100% + "+o.h+"px)",a&&0==o.h&&(e.hBar.scrollBarTrack.style.display="none")):(e.scrollCevBox.style.overflowX="hidden",e.scrollCevBox.style.height="100%")}else e.scrollCevBox.style.overflow="hidden",e.scrollCevBox.style.height="100%",e.scrollCevBox.style.width="100%"}(e)}function B(e){e.vBar&&(e.vBar.scrollBarThumb.removeEventListener("mousedown",e.mouseDown,0),e.vBar.scrollBarThumb.removeEventListener("touchstart",e.mouseDown,0),e.scrollBox.removeChild(e.vBar.scrollBarTrack),delete e.vBar)}function g(e){e.hBar&&(e.hBar.scrollBarThumb.removeEventListener("mousedown",e.mouseDown,0),e.hBar.scrollBarThumb.removeEventListener("touchstart",e.mouseDown,0),e.scrollBox.removeChild(e.hBar.scrollBarTrack),delete e.hBar)}function f(e){var o,r,t,n,s;(o=e.vBar)&&(r=0==e.scrollCevBox.scrollHeight?1:e.scrollCevBox.clientHeight/e.scrollCevBox.scrollHeight,o.scrollOffsetArea=r,o.barBoxLength=o.scrollBarTrack.clientHeight,r>=1?(o.barLength=0,l.removeClass(e.scrollBox,e.config.clsBoxVisibleBarV),l.addClass(e.scrollBox,e.config.clsBoxInvisibleBarV)):(n=t=o.scrollBarTrack.clientHeight*r,n=e.config.minLength>0&&e.config.minLength>n?e.config.minLength:n,n=e.config.maxLength>0&&e.config.maxLength<n?e.config.maxLength:n,o.barLength=n,s=(e.config.minLength>0?e.config.minLength:0)+100,o.barBoxLength=s>o.scrollBarTrack.clientHeight?s:o.scrollBarTrack.clientHeight,o.scrollOffsetArea=(o.barBoxLength-n)/(o.scrollBarTrack.clientHeight-t)*(o.scrollBarTrack.clientHeight/e.scrollCevBox.scrollHeight),l.removeClass(e.scrollBox,e.config.clsBoxInvisibleBarV),l.addClass(e.scrollBox,e.config.clsBoxVisibleBarV))),(o=e.hBar)&&(r=0==e.scrollCevBox.scrollWidth?1:e.scrollCevBox.clientWidth/e.scrollCevBox.scrollWidth,o.scrollOffsetArea=r,o.barBoxLength=o.scrollBarTrack.clientWidth,r>=1?(o.barLength=0,l.removeClass(e.scrollBox,e.config.clsBoxVisibleBarH),l.addClass(e.scrollBox,e.config.clsBoxInvisibleBarH)):(n=t=o.scrollBarTrack.clientWidth*r,n=e.config.minLength>0&&e.config.minLength>n?e.config.minLength:n,n=e.config.maxLength>0&&e.config.maxLength<n?e.config.maxLength:n,o.barLength=n,s=(e.config.minLength>0?e.config.minLength:0)+100,o.barBoxLength=s>o.scrollBarTrack.clientWidth?s:o.scrollBarTrack.clientWidth,o.scrollOffsetArea=(o.barBoxLength-n)/(o.scrollBarTrack.clientWidth-t)*(o.scrollBarTrack.clientWidth/e.scrollCevBox.scrollWidth),l.removeClass(e.scrollBox,e.config.clsBoxInvisibleBarH),l.addClass(e.scrollBox,e.config.clsBoxVisibleBarH)))}function b(e){var o;(o=e.vBar)&&(o.barOffset=e.scrollCevBox.scrollTop*o.scrollOffsetArea,o.scrollBarThumb.style.height=parseInt(Math.round(o.barLength))+"px",o.scrollBarThumb.style.top=parseInt(Math.round(o.barOffset))+"px"),(o=e.hBar)&&(o.barOffset=e.scrollCevBox.scrollLeft*o.scrollOffsetArea,o.scrollBarThumb.style.width=parseInt(Math.round(o.barLength))+"px",o.scrollBarThumb.style.left=parseInt(Math.round(o.barOffset))+"px")}function m(e,o){e.nextTickHandler=o,c(e),function(e){e.mouseDown||(e.mouseDown=function(o){if(!o.targetTouches&&1!==o.which)return!1;var r=o.targetTouches?o.targetTouches[0]:o;if(e.vBar&&this==e.vBar.scrollBarThumb)e.vBar.barDragging=!0,e.vBar.startMouse=r.clientY-e.vBar.scrollBarThumb.getBoundingClientRect().top;else{if(!e.hBar||this!=e.hBar.scrollBarThumb)return!1;e.hBar.barDragging=!0,e.hBar.startMouse=r.clientX-e.hBar.scrollBarThumb.getBoundingClientRect().left}l.addClass(e.scrollBox,e.config.clsBoxDragging),e.draggingPhantomClassTimer&&clearTimeout(e.draggingPhantomClassTimer),l.addClass(e.scrollBox,e.config.clsBoxDraggingPhantomClass),document.addEventListener("mousemove",e.mouseMove,1),document.addEventListener("mouseup",e.mouseUp,1),document.addEventListener("touchmove",e.mouseMove,1),document.addEventListener("touchend",e.mouseUp,1),o.preventDefault(),o.stopPropagation()})}(e),function(e){e.mouseMove||(e.mouseMove=l.throttle(function(o){var r=o.targetTouches?o.targetTouches[0]:o;!function(e,o){var r,l;(r=e.vBar)&&r.barDragging&&((l=o.clientY-r.scrollBarTrack.getBoundingClientRect().top)<=r.startMouse&&(r.barOffset=0),l>r.startMouse&&(r.barOffset=l-r.startMouse),r.barOffset+r.barLength>=r.barBoxLength&&(r.barOffset=r.barBoxLength-r.barLength),e.scrollCevBox.scrollTop=r.barOffset/r.scrollOffsetArea),(r=e.hBar)&&r.barDragging&&((l=o.clientX-r.scrollBarTrack.getBoundingClientRect().left)<=r.startMouse&&(r.barOffset=0),l>r.startMouse&&(r.barOffset=l-r.startMouse),r.barOffset+r.barLength>=r.barBoxLength&&(r.barOffset=r.barBoxLength-r.barLength),e.scrollCevBox.scrollLeft=r.barOffset/r.scrollOffsetArea)}(e,r)},e.config.draggerThrottle,function(e){e.preventDefault(),e.stopPropagation()}))}(e),function(e){e.mouseUp||(e.mouseUp=function(o){e.vBar&&(e.vBar.barDragging=!1),e.hBar&&(e.hBar.barDragging=!1),l.removeClass(e.scrollBox,e.config.clsBoxDragging),e.draggingPhantomClassTimer&&clearTimeout(e.draggingPhantomClassTimer),e.draggingPhantomClassTimer=setTimeout(function(){l.removeClass(e.scrollBox,e.config.clsBoxDraggingPhantomClass),e.draggingPhantomClassTimer&&delete e.draggingPhantomClassTimer},e.config.draggingPhantomDelay),document.removeEventListener("mousemove",e.mouseMove,1),document.removeEventListener("mouseup",e.mouseUp,1),document.removeEventListener("touchmove",e.mouseMove,1),document.removeEventListener("touchend",e.mouseUp,1),o.preventDefault(),o.stopPropagation()})}(e)}function x(e){v(e),d(e),function(e){e.config.preventParentScroll?e.wheelHandler||(e.wheelHandler=function(o){if(e.visibleArea>=1)return!1;var r=e.scrollCevBox.scrollHeight-e.scrollCevBox.clientHeight,l=e.scrollCevBox.scrollTop,t=o.deltaY<0,n=o.deltaY>0;if(l<=0&&t||l>=r&&n)return o.preventDefault(),!1;var s=e.scrollCevBox.scrollHeight-e.scrollCevBox.clientHeight,a=e.scrollCevBox.scrollLeft,i=o.deltaX<0,c=o.deltaX>0;return a<=0&&i||a>=s&&c?(o.preventDefault(),!1):(o.stopPropagation(),!0)},e.scrollCevBox.addEventListener("wheel",e.wheelHandler,0)):h(e)}(e),function(e){e.config.resizeRefresh?e.resizeHandler||(e.resizeHandler=l.debounce(function(){p(e)},e.config.resizeDebounce),window.addEventListener("resize",e.resizeHandler,0)):u(e)}(e)}function p(e){var o=function(){e&&(f(e),b(e))};e.nextTickHandler?e.nextTickHandler(o):o()}function C(e){!function(e){e.draggingPhantomClassTimer&&clearTimeout(e.draggingPhantomClassTimer),e.scrollingClassTimeout&&clearTimeout(e.scrollingClassTimeout),e.scrollingPhantomClassTimeout&&clearTimeout(e.scrollingPhantomClassTimeout)}(e),u(e),h(e),function(e){B(e),g(e)}(e),function(e){e.scrollCevBox&&(l.removeClass(e.scrollBox,e.config.clsBox),e.scrollBox.style.position="",e.scrollBox.style.overflow="",e.scrollCev.style.display="",e.scrollBox.removeChild(e.scrollBoxClip),e.scrollCevBox.removeChild(e.scrollCev),e.scrollBox.appendChild(e.scrollCev),e.scrollCevBox.removeEventListener("scroll",e.scrollHandler,0),e.mutationObserver&&(e.mutationObserver.disconnect(),delete e.mutationObserver),delete e.scrollCev,delete e.scrollCevBox,delete e.scrollBoxClip,delete e.scrollBox)}(e)}return function(){function e(r,l){if(o(this,e),!function(e){return!!e.firstElementChild}(r))return{};this.rootEl=r,this.config=Object.assign({},n),m(this,l)}return r(e,[{key:"bind",value:function(e){return this.update(e),this}},{key:"update",value:function(e){return function(e,o){if(o)for(var r in o)e.config[r]=o[r];e.barBehavior=function(e){var o,r="show",l="show";(o=(e=e||"").match(/^\s*(show|hide|none)\s*$/i))?o.length>=2&&(r=l=o[1].toLowerCase()):(o=e.match(/^\s*(show|hide|none)\s+(show|hide|none)\s*$/i))&&o.length>=3&&(r=o[1].toLowerCase(),l=o[2].toLowerCase());var t=!0,n=!0;"none"==r?(t=!1,n=!1):"hide"==r&&(t=!0,n=!1);var s=!0,a=!0;return"none"==l?(s=!1,a=!1):"hide"==l&&(s=!0,a=!1),{vBarEnable:t,vBarShow:n,hBarEnable:s,hBarShow:a}}(e.config.scrollBarBehavior)}(this,e),x(this),p(this),this}},{key:"refreshBar",value:function(){return p(this),this}},{key:"unBind",value:function(){return C(this),this}}],[{key:"bind",value:function(o,r,l){return o._easyBar||(o._easyBar=new e(o,l).bind(r)),o._easyBar}},{key:"update",value:function(e,o){e._easyBar&&e._easyBar.update(o)}},{key:"get",value:function(e){return e._easyBar}},{key:"refreshBar",value:function(e){e._easyBar&&e._easyBar.refreshBar()}},{key:"unBind",value:function(e){e._easyBar&&(e._easyBar.unBind(),delete e._easyBar)}},{key:"install",value:function(o){o.directive("bar",{inserted:function(r,l){e.bind(r,l&&l.value?l.value:null,o.nextTick)},update:function(o,r){e.update(o,r&&r.value?r.value:null)},componentUpdated:function(o){e.refreshBar(o)},unbind:function(o){e.unBind(o)}}),Object.defineProperty(o.prototype,"$EasyBar",{get:function(){return e}})}}]),e}()});
